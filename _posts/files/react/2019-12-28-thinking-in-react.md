---
layout: post
title: React스럽게 생각하기
categories: React
---

React스럽게 생각하는 방법에 대해 알아봅니다. 상속보다는 구성으로 React스럽게 생각해 보도록 합니다.

## 1단계: UI를 컴포넌트 계층으로 분리하기

가장 먼저 해야할 일은 모형의 각 컴포넌트 (와 서브컴포넌트)에 박스를 그리고 이름을 지어주는 것입니다. 컴포넌트의 책임을 생각하여 `단일 책임원칙 (single responsibility principle)`에 부합할 수 있도록 컴포넌트 객체를 만듭니다. 컴포넌트가 한가지의 작업만 하는 것이 이상적입니다. 컴포넌트가 점점 커진다면 작은 서브컴포넌트들로 분리되어야합니다. 컴포넌트에서 나타나는 컴포넌트는 계층 구조도 함께 정의해 봅니다.

## 2단계: React를 이용해 정적버전 만들기

이제 컴포넌트 계층구조가 만들어졌으니 앱을 실제로 구현해봅니다. 실제 상호작용으로 동작하는 UI를 렌더링 해보는 대신 정적버전을 먼저 만들어 봅니다. 생각과 타이핑이 완벽한 모델 모다는 적은 노력으로 빠르게 프로토 타입을 구성할 수 있습니다. 이때 고민이 필요한 부분은 데이터 모델을 렌더링하기 위한 최소한의 재사용가능한 컴포넌트 분리 및, 컴포넌트에서 사용되는 혹은 전달되는 prop을 정의하는 것입니다. props 는 부모가 자식에게 데이터를 넘겨줄 때 사용할 수 있는 방법입니다. 단, state는 상호작용을 위한 것이니 정적 버전에서는 사용하지 않도록 합니다. 정적버전에서는 데이터가 바뀌지 않습니다.

이 단계가 끝나면 데이터 렌더링을 위해 만들어진 재사용 가능한 컴포넌트의 라이브러리를 가지게 됩니다. 현재는 앱의 정적 버전이기 때문에 컴포넌트는 render() 메서드만 가지고 있을 것입니다.

React의 단방향 데이터 플로우 (one-way data flow) (또는 단방향 바인딩 (one-way binding))는 앱을 모듈화 하기 좋고 빠르게 만들어줍니다.

## 3단계: UI state에 대한 최소한의 (하지만 완전한) 표현 찾아내기

UI를 상호작용하게 만드려면 기반 데이터 모델을 변경할 수 있는 방법이 있어야합니다. React는 state 로 이를 쉽게할 수 있습니다. 앱을 올바르게 만들기 위해서는 앱에서 필요로 하는 변경가능한 state의 최소 집합을 생각해보아야 합니다. 여기서 핵심은 `DRY: Don’t Repeat Yourself 원칙`입니다. 어플리케이션이 필요로 하는 state를 완전하지만 작은 형태로 표현할 방법을 찾아내고 다른 모든 것은 필요할 때 state에서 계산하면 됩니다.

- 부모로부터 props를 통해 전달되는 것이라면 이것은 확실히 state가 아닙니다.
- 시간이 지나도 변하지 않나요? 그러면 확실히 state가 아닙니다.
- 컴포넌트 안의 다른 state나 props를 가지고 계산 가능하다면 state가 아닙니다.

## 4단계: State가 어디에 있어야할 지 찾기

최소한으로 필요하는 state가 뭔지 찾아냈습니다. 다음으로는 어떤 컴포넌트가 state를 변경하거나 소유 할 지 찾아야합니다.

중요한것은! React는 항당 컴포넌트 계층구조를 따라 아래로 내려가는 단방향 데이터 흐름을 따릅니다. 어떤 컴포넌트가 어떤 상태를 가져야하는 지 바로 결정하기 어려울 수 있습니다.

먼저 state를 기반으로 렌더링하는 모든 컴포넌트를 찾습니다.

### 공통 오너 컴포넌트 (common owner component)

공통 오너 컴포넌트는 계층 구조 내에서 특정 state를 필요로하는 모든 컴포넌트들의 위에 있는 하나의 컴포넌트입니다. 공통 오너 혹은 더 상위에 있는 컴포넌트가 state를 가져야합니다. state를 소유할 적절한 컴포넌트를 찾지 못하였다면, 단순히 state를 소유하는 컴포넌트를 하나 만들어서 공통 오너 컴포넌트의 상위 계층에 추가합니다.

## 5단계: 역방향 데이터 흐름 추가하기

계층 구조 아래로 흐르는 props와 state의 함수로서 앱을 만들수도 있지만 다른 방향의 데이터 흐름을 만들수 있습니다. 계층 구조의 깊숙한 곳에 있는 폼 컴포넌트에서 state를 업데이트할 수 있는 방법이 존재 합니다.

React는 이러한 데이터 흐름을 명시적으로 보이게 만들어서 프로그램이 어떻게 동작하는 지 쉽게 파악할 수 있게 하지만 전통적인 양방향 데이터 바인딩 (two-way data binding)과 비교하면 더 많은 타이핑을 필요로 할 수 있습니다.

## 상속보다는 구성(합성)

구성과 상속은 코드 재사용 방법에서 큰 비중을 차지합니다. 이 둘은 코드 재사용 면에서는 공통점이 있지만 클래스 혹은 개체(object) 간 관계를 표현하는 것에는 차이를 보입니다. 구성은 특정 기능의 개체를 가지는 것으로 HAS-A관계를 의미합니다. 반면 상속은 부모에서 구현된 멤버가 자식 클래스를 통해 노출되는 것으로 IS-A관계를 의미합니다. 디자인 설계원칙의 한가지 방법으로 상속보다는 구성을 활용하라 는 원칙이 있습니다.

구성을 이용하여 시스템을 만들면 유연성을 크게 향상시킬 수 있습니다. 구성을 통하여 바뀌는 부분에 대해 캡슐화 하고 달라지는 부분으로 부터 분리하며 구성을 통해 소프트웨어의 응집도를 높이고 느슨한 결합으로 디자인 할 수 있습니다.

props와 합성은 명시적이고 안전한 방법으로 컴포넌트의 모양과 동작을 커스터마이징하는데 필요한 모든 유연성을 제공합니다. 컴포넌트가 원시 타입의 값, React 엘리먼트 혹은 함수 등 어떠한 props도 받을 수 있습니다.

## 정리

코드는 쓸 일보다 읽을 일이 더 많습니다. 모듈화되고 명시적인 코드는 읽을때 조금 덜 어렵습니다. 큰 컴포넌트 라이브러리를 만들게 되면 이 명시성과 모듈성에 감사할 것이며 코드 재사용성을 통해 코드 라인이 줄어들기 시작할 것입니다.

React는 강력한 합성 모델을 가지고 있으며, 상속 대신 합성을 사용하여 컴포넌트 간에 코드를 재사용하는 것이 좋습니다. 컴포넌트를 분리하면 여러가지 장점이있습니다. 캡슐화, 확장성, 결합성, 재사용성, 가독성 등등.. 여러가지 장점이 있기때문에 컴포넌트를 분리를 하여 많은 이점을 얻습니다.

UI가 아닌 기능을 여러 컴포넌트에서 재사용하기를 원한다면, 별도의 JavaScript 모듈로 분리하는 것이 좋습니다. 컴포넌트에서 해당 함수, 객체, 클래스 등을 import 하여 상속받지 않고 사용할 수 있습니다.

---

해당 내용은 다음 글을 참고 하였습니다.

- https://jwchung.github.io/%EC%83%81%EC%86%8D%EC%9D%80-%EC%BD%94%EB%93%9C-%EC%A4%91%EB%B3%B5%EC%A0%9C%EA%B1%B0%EB%A5%BC-%EC%9C%84%ED%95%9C-%EC%B5%9C%ED%9B%84%EC%9D%98-%EB%B3%B4%EB%A3%A8
- https://reactjs.org/docs/thinking-in-react.html
