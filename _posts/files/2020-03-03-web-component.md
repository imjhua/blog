---
layout: post
title: Web Component
categories: WEB
---

웹 컴포넌트는 그 기능을 나머지 코드로부터 캡슐화하여 재사용 가능한 커스텀 엘리먼트를 생성하고 웹 앱에서 활용할 수 있도록 해주는 다양한 기술들의 모음입니다.

## 웹 컴포넌트
HTML이 기본으로 제공하는 엘리먼트는 브라우저와 운영체에제 따라 다르게 보이는 경우도 있고, 더 발전하는 웹 환경에 대응하기에 한계가 있습니다. 이런 한계를 JavaScript 컴포넌트로 보완하고 있습니다. 그러나 JavaScript 컴포넌트는 사용이 어려울 뿐만 아니라 크기가 커서 실행 속도가 느립니다. W3C(World Wide Web Consortium)에서는 이러한 문제를 개선하고자 웹 컴포넌트(Web Component)라는 명세(Specification)를 만들었습니다.

가능한 한 코드를 재사용하는 것이 좋은 생각이라는 것을 알고 있습니다. 이는 전통적으로 커스텀 마크업 구조에선 쉽지 않았습니다. 커스텀 UI 컨트롤을 렌더링하기위해 작성해야하는 복잡한 HTML (및 관련된 스타일과 스크립트)을 생각해보십시오. 여러번 사용할 때 조심하지 않으면 페이지가 엉망이 될 수 있습니다.


## 웹 컴포넌트 세가지 주요 기술 및 구성
세 가지 주요 기술들로 구성되며, 재사용을 원하는 어느곳이든 코드 충돌에 대한 걱정이 없는 캡슐화된 기능을 갖춘 다용도의 커스텀 엘리먼트를 생성하기 위해 함께 사용될 수 있습니다. 웹 컴포넌트는 다음으로 구성됩니다.

- 템플릿(Templates)
- 데코레이터(Decorators)
- 커스텀 엘리먼트(Custom Element)
- 섀도 DOM(Shadow DOM)에 관해 알아보겠습니다.


### 커스텀 엘리먼트
커스텀 엘리먼트와 그 동작을 정의할 수 있도록 해주는 JavaScript API 의 집합으로, 사용자 인터페이스에서 원했던대로 사용될 수 있습니다. 사용자 인터페이스에서 원하는대로 사용할 수있는 사용자 정의 요소 및 해당 동작을 정의 할 수있는 JavaScript API 세트입니다.

웹 컴포넌트 표준의 주요 기능 중 하나는 HTML 페이지에 커스텀 페이지 기능을 함께 제공하는 엘리먼트의 길고 중첩된 묶음을 만드는 것보다 사용자의 기능이 캡슐화된 커스텀 엘리먼트를 생성하는 기능입니다. 이 문서는 HTML 커스텀 엘리먼트의 사용을 소개합니다.

테코레이터가 단순히 엘리먼트에 스타일을 적용하는 것이라면 커스텀 엘리먼트는 개발자가 새로운 엘리먼트를 만드는 것과 같습니다. 그래서 다양한 기능이 있는 커스텀 엘리먼트를 만들 수 있습니다. 커스텀 엘리먼트는 엘리먼트를 상속하고 있어 createElement 메서드나 생성자로 만들 수 있습니다.


### 쉐도우 돔 (Shadow DOM)

섀도 DOM은 DOM의 구조를 가지고 있으나 외부에는 노출되지 않은 DOM을 말하며 DOM의 구조를 캡슐화할 때 사용합니다. 일반적인 외부의 style은 적용되지 않고 섀도 DOM을 추가하거나 접근하기 위해서는 별도의 방법이 필요합니다. 그리고 위에서 설명한 템플릿 엘리먼트를 이용해 만들어진 데코레이터나 커스텀 엘리먼트는 모두 섀도 DOM으로 만들어집니다. 다만, 데코레이터에서 만들어진 섀도 DOM은 스크립트로 접근하거나 수정할 수 없습니다. 그에 비해 커스텀 엘리먼트로 만들어진 섀도 DOM은 스크립트로 수정할 수 있습니다.

캡슐화된 "그림자" DOM 트리를 엘리먼트(메인 다큐먼트 DOM 으로부터 독립적으로 렌더링 되는)를 추가하고 연관된 기능을 제어하기 위한 JavaScript API 의 집합입니다. 이 방법으로 엘리먼트의 기능을 독립적으로 유지할 수 있어, 다큐먼트의 다른 부분과의 충돌에 대한 걱정 없이 스크립트와 스타일을 작성할 수 있습니다.

### HTML 템플릿
웹 컴포넌트도 특정 엘리먼트의 구조가 필요하며 이때 사용하는 것이 템플릿입니다. 아래 코드와 같이 템플릿 안에 원하는 엘리먼트 구조를 만들면 됩니다. <template> 과 <slot> 엘리먼트는 렌더링된 페이지에 나타나지 않는 마크업 템플릿을 작성할 수 있게 해줍니다. 그 후, 커스텀 엘리먼트의 구조를 기반으로 여러번 재사용할 수 있습니다.

### 데코레이터
데코레이터는 엘리먼트를 오버라이드(override)해 엘리먼트를 꾸미는 역할을 합니다. 비교를 하자면 테코레이터는 리모델링이라고 생각하면 되고, 뒤에 설명할 커스텀 엘리먼트는 새로 만드는 것으로 생각하면 됩니다. 템플릿 엘리먼트에 적당한 엘리먼트 구조를 만들고 스타일을 지정한 다음에 <decorator> 태그를 이용하여 만듭니다.

## 웹 컴포넌트의 필요성
웹 컴포넌트가 필요해지기 시작햇습니다. HTML 엘리먼트는 <그림 1>과 같이 같은 요소라도 브라우저와 운영체제에 따라 다르게 보입니다. 이렇게 다르게 보이는 엘리먼트를 브라우저와 운영체제에 상관 없이 같게 보이도록 해 사용자에게 동일한 룩앤드필(look and feel)을 제공할 때 JindoJS Component와 같은 JavaScript 컴포넌트를 사용합니다. 또한, 날이 갈수록 더 미려해지는 웹 환경(Rich Web)에서는 브라우저 자체에서 지원하는 엘리먼트만 사용하기에는 한계가 있습니다. 물론 HTML5에 다양한 input 타입과 새로운 엘리먼트가 추가되었지만 여전히 부족합니다. 이런 문제를 해결하기 위해서도 JavaScript 컴포넌트를 사용합니다.

### JavaScript 컴포넌트 문제점
첫 번째, 적용이 힘듭니다. JavaScript 컴포넌트를 사용하려면 스크립트 파일과 CSS 파일을 포함하고 특정한 마크업 구조를 사용해야 하는 등 개발자도 사용하기에 힘들어 합니다. 디자이너와 같이 비개발자가 사용하기에는 더욱 힘듭니다.

두 번째, 느립니다. JavaScript 컴포넌트는 상당한 크기의 JavaScript 덩어리라 사용할 때 많은 비용이 발생합니다. 그리고 컴포넌트의 작동 방식이 대부분 로드가 완료된 후에 적용하는 방식이기 때문에 추가로 비용이 발생합니다. 그래서 JavaScript 컴포넌트를 저사양의 기기에서 사용하는 데 제약이 있습니다.

W3C에서는 이러한 이슈를 개선하고자 웹 컴포넌트(Web Component)라는 명세(Specification)를 만들게 됩니다. 웹 컴포넌트는 Internet Explorer에서 지원하던 HTC(HTML Component)와 유사한 방식으로 개발자가 자체적으로 HTML 엘리먼트를 만드는 기술입니다.

### 웹 컴포넌트의 장점
웹 컴포넌트의 장점은 JavaScript의 단점을 개선한 것입니다.

- 컴포넌트를 캡슐화(encapsulation)하여 쉽게 적용할 수 있다.
- 네이티브 엘리먼트로 동작하기 때문에 성능이 좋다.

## 결론
웹 컴포넌트는 커스텀 엘리먼트 + 쉐도우 돔입니다. 

HTML 엘리먼트는 같은 요소라도 브라우저와 운영체제에 따라 다르게 보인다. 또한 HTML5 이외에도 다양한 엘리먼트가 필요하다.

그래서 JS 컴포넌트를 사용하기도 하지만, 적용이 힘들고 느리다.


웹 컴포넌트는 점점 표준으로 자리잡아가고 있다. IE가 이제 역사속으로 사라질 날이 가까워 옴에 따라(한국은 언제쯤??) 앞으로 점점 웹 컴포넌트의 위상이 높아질 것 같다. 2016년 구글 I/O 발표 처럼 어쩌면 DOM이 가장 지속가능하고 간결한 프레임워크가 아닐까 싶다. 리액트가 됐든, 뷰(vue)가 됐든 각종 웹 프레임워크들은 훌륭한 솔루션임에는 틀림없다. 하지만 앱의 규모가 커지면 커질수록 점점 프레임워크에 의존적인 코드가 양산되고 리소스가 증가한다. 증가된 리소스는 자연스레 사용자에게 전가될 수 밖에 없다. 웹 컴포넌트를 사용하면 이런 리소스는 훨씬 가벼워진다. 그렇다고 당장 웹 컴포넌트로 전환하기에는 해결해야할 문제들이 많다. 하지만 언젠가 브라우저 벤더들이 공통으로 모든 표준을 따라 브라우저를 만들어 낸다면 앞으로는 서드파티 프레임워크에 의존하지 않고 표준 스펙만으로 웹앱을 만들 수 있는 날이 올지도 모르겠다.


---

해당 내용은 다음 글을 참고 하였습니다.
- https://d2.naver.com/helloworld/188655
- https://developer.mozilla.org/ko/docs/Web/Web_Components