---
layout: post
title: 트랜지션 효과(자연스럽게 사라지기)
categories: Web
---

화면에 노출되는 요소를 제어하는 스타일 속성들이 몇가지 존재합니다. 이는 브라우저 렌더링에 차이가 있습니다. 이에 따라 애니메이션 효과가 적용되기도 합니다. 그 차이를 알아봅니다.

## 리플로우와 리페인트

렌더링은 리플로우와 리페인트과정을 거칩니다.

### Reflow 발생 요소

리플로우는 모든 엘리먼트의 `위치와 길이, 크기 등을 다시 계산`하는 것으로 문서의 일부 혹은 전체를 다시 렌더링한다. 단일 엘리먼트 하나를 변경해도, 하위 엘리먼트나 상위 엘리먼트 등에 영향을 미칠 수 있습니다.

- 노드의 추가 또는 제거
- 요소의 위치 변경
- 요소의 크기 변경(인크리멘탈/글로벌 레이아웃)

### Repaint 발생 요소

리페인트는 레이아웃에는 영향을 주지 않지만, `가시성에는 영향`을 주는 엘리먼트가 변경되면 발생하는 과정입니다.

- opacity
- visibility
- background-color
- outline

## 요소를 화면에 노출하기

요소를 표시할지말지, 보일지 말지, 렌더트리생성과정을 거치는지 또 리플로우와 리페인트과정에서 어떤 차이가 있을까요?

- display: 요소자체가 없거나 있거나
- visibility: 요소는 존재하나 보일지 말지 결정
- opacity: 요소는 존재하나 투명도를 조절하여 노출

### display

리플로우는 레이아웃이 변경되었을때 거치는데 display의 경우 요소자체가 존재하지 않기때문에 렌더트리생성과정에서도 제외됩니다. 당연히 리플로우와 리페인트도 일으키지 않습니다.

### visibility

화면에 보이지 않지만 공간은 분명 차지하고 있기때문에 리플로우 대상이 됩니다. 레이아웃은 하나로 관리됩니다.

### opacity

요소는 항상 존재합니다. 투명도를 통해 보이거나, 보이지 않게 됩니다. 투명도는 여러개의 레이아웃으로 관리됩니다.

## 트랜지션 효과(애니메이션 동작)

중간동작이 존재해야 합니다. 중간동작이라는 것은 레이아웃상의 합성 및 페인팅과정을 의미합니다. 나누어져 페인팅되어 있는 레이아웃들의 합성 과정에서 우리는 시각적으로 움직임을 나타내는 애니메이션 효과를 느낄 수 있습니다.

- display: 요소자체가 없어지기 때문에 렌더트리에서 바로 제외됩니다. 즉 시각적으로 애니메이션을 느낄 수 없습니다.
- visibility: 요소의 레이아웃은 존재하나, 페인팅이 한번에 이루어집니다.
- opacity: 요소가 항상 존재하기 때문에 투명도들이 레이아웃들로 관리되어 페인팅과정에서의 시각적 애니메이션효과를 줄 수 있습니다.

## 성능 팁(Tip)

- 사용하지 않는 노드에는 visibility: invisible 보다 display: none을 사용한다.

## 정리

- 리플로우: 위치와 길이, 크기 등을 다시 계산
- 리페인트: 가시성에는 영향

- opacity: 서서히 사라짐
- visibility: 트랜지션 지속시간 후 사라짐
- display: 바로 사라짐
- background-img: 애니메이션 가능!

---

해당 내용은 다음 글을 참고 하였습니다.

-
