---
layout: post
title: Run-to-completion
categories: JavaScript
---



### Run-to-completion 방식

이벤트 루프에 의해서 각 메시지는 다른 메시지가 처리되기 전에 완전히 처리됩니다. 하나의 메시지 처리가 시작되면 이 메시지의 처리가 끝날 때까지는 다른 어떤 작업도 중간에 끼어들지 못합니다. 어떤 메시지가 완료되기까지 지나치게 오래 걸리는 경우에는 웹 어플리케이션은 클릭이나 스크롤과 같은 사용자 인터랙션을 처리할 수 없게 됩니다.
### 블록킹 해결방안
이벤트 루프에 의한 블로킹은 다음으로 해결 할 수 있습니다.

- 단일 콜 스택 구조와 이벤트 루프 때문에 블록이 발생하고 있으니 다른 스레드에 작업을 위임한다.
- 블로킹의 원인이 되는 고비용 태스크를 적절하게 쪼개서 실행한다. (스케줄링: task대기열에 적재한다.)


요약하자면, ‘만약 실행 시간이 긴 태스크 혹은 마이크로 태스크가 렌더링이나 클릭, 입력과 같은 이벤트를 블록한다면 사용자 경험을 해칠 수 있다. 이를 개선하기 위해 웹 워커와 같은 백그라운드 스레드에 처리하는 데 오래 걸리는 작업을 위임하거나, 작은 태스크로 쪼개서 적절하게 실행될 수 있도록 처리하여 중요한 UI 이벤트가 블록되지 않도록 조치해야 한다’로 정리할 수 있겠습니다.

---

해당 내용은 다음 글을 참고 하였습니다.

- https://engineering.linecorp.com/ko/blog/dont-block-the-event-loop/
