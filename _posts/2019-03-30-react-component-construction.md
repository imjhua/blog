---
layout: post
title: React 컴포넌트 구성 방법
tags:
 - react-component
categories: React
---

## 소개
컴포넌트 활용시에는 쉽게 재사용할 수 있는 방법을 찾아야 합니다. 이를 위한 다양한 컴포넌트 구성의 디자인 패턴들이 존재합니다. 우리는 보여지는 역할과 상태변화에 대한 동작하는 역할을 나누어 컴포넌트를 구성하는 디자인 패턴에 대해 알아 보겠습니다. 각각 프레젠테이션 컴포넌트와 컨테이너 컴포넌트로 분리 할 수 있습니다. 먼저 프레젠테이션 컴포넌트를 만든 주고 받아야 할 속성 혹은 상태들을 고민해 봅니다. props를 사용하지 않고 자식 컴포넌트로 전달하는 역할만 하는 컴포넌트가 존재한다는 사실을 알게 될텐데, 이것이 바로 컨테이너 컴포넌트가 될 것입니다. 데이터나 아무 상관없는 중간 컴포넌트에 대해 걱정이 없는 leaf 컴포넌트의 행위가 담긴 props 를 얻을 수 있는 방법이 될 것입니다. 이 방법으로 컴포넌트를 작성하면 당신의 앱(기능)과 UI 에 대한 구분을 이해하기가 더 수월합니다. 재사용성이 뛰어나며 완전히 서로 다른 상태값과 함께 같은 프레젠테이션 컴포넌트를 사용할 수 있고, 재사용 될 수 있는 별도의 컨테이너 컴포넌트로 변경할 수 있습니다.

재사용성과 유지보수성을 높이기 위해서 컴포넌트를 다음 두 가지 종류로 나누어 생각할 수 있습니다. 

## 컴포넌트 구성

### 프레젠테이션 컴포넌트
프레젠테이션 컴포넌트는 말하자면 앱의 팔레트와 같습니다. 앱의 싱글페이지 위에서 앱의 로직을 건드리지 않고 디자이너에게 모든 변화를 조정하게 할 수 있으며 이것은 사이드바, 페이징, 컨텍스트메뉴와 같은 레이아웃 컴포넌트를 추출하도록 할것이고, 이것은 동일한 마크업이나 몇몇의 컨테이너 레이아웃을 반복해서 작성하는 대신 this.props.children 을 통해서 구현될 수 있습니다.


- 어떻게 보여지는지와 관련있다.
- 프레젠테이션 컴포넌트와 컨테이너 컴포넌트가 모두 그 안에 들어가 있을것(**)이고, 일부 DOM 마크업과 스타일도 가지고 있다.
- 종종 this.props.children 을 통해서 노출된다.
- Flux 액션이나 stores 등과 같은 앱의 나머지 부분들에 의존적이지 않다.
- 데이터를 가져오거나 변경하는 방법에 대해서 관여할 필요가 없다.
- props 를 통해 배타적으로 callback 함수와 데이터를 받는다.
- 상태를 거의 가지고 있지 않다(만약 상태를 가지고 있다면, 데이터에 관한 것이 아닌 UI 상태에 관한 것이다).
- 만약 상태, 생명주기, hooks, 또는 퍼포먼스 최적화가 필요없다면, 유틸함수로서 쓰여질것이다.
- 예를들면 페이지, 사이드바, 스토리, 유저정보, 리스트 등이 있다.

- JSX를 이용한 마크업이 존재합니다.
- render에 필요한 데이터는 이미 존재한다고 가정합니다.
- UI를 위한 state가 존재할 수 있습니다.

### 컨테이너 컴포넌트
컴포넌트는 DOM 을 생성하지 말아야 합니다. 컴포넌트는 단지 UI 와 관련된 것들을 조합하는 것을 제공하는 것이 필요합니다.

- 어떻게 동작하는지와 관련있다.
- 프레젠테이션 컴포넌트와 마찬가지로 프레젠테이션 컴포넌트와 컨테이너 컴포넌트 모두 가지고 있지만 감싼 divs 를 제외하고는 DOM 마크업을 가지고 있지 않는다. 스타일 역시 가지고 있지 않는다.
- 데이터와 기능(행동)을 프레젠테이션 컴포넌트와 다른 컴포넌트에 제공한다.
- Flux(or Redux) 액션을 호출하고, 프레젠테이션 컴포넌트에 콜백함수로써 제공한다.
- 데이터 소스 역할을 하기 때문에 상태가 자주 변경된다.
- 직접 만드는것 보단 대게 React Redux 의 connect() 함수, Relay 의 createContainer() 함수, Flux Utils 의 Container.create()와 같은 Higher Order Components를 이용해서 만들어진다.
- 예를들면 유저페이지, 팔로워 사이드바, 스토리 컨테이너, 팔로우한 유저 리스트 등이 있다.
- 저는 이것들을 확실하게 구분하기 위하여 서로 다른 폴더에 생성한다.

- JSX를 이용한 마크업이 거의 없습니다.
- Ajax 요청, HOC 등을 이용해 render에 필요한 데이터를 Fetching 합니다.
- 데이터 Fetching 등을 위한 state가 존재할 수 있습니다.

## 정리
위에서 알 수 있듯 state의 존재 여부가 Presentational & Container 컴포넌트를 구분 짓는 것이 아닙니다.


| | Presentational 컴포넌트	| Container 컴포넌트 | 
|-------------------------|------------------| 
| 목적	| 어떻게 보여질 지 (마크업, 스타일)	| 어떻게 동작할 지 (데이터 불러오기, 상태 변경하기)
| Redux와 연관됨	| 아니오	| 예
| 데이터를 읽기 위해	| props에서 데이터를 읽음	| Redux 상태를 구독
| 데이터를 바꾸기 위해	| props에서 콜백을 호출	| Redux 액션을 보냄




----
해당 내용은 다음 글을 참고 하였습니다.
- https://deminoth.github.io/redux/basics/UsageWithReact.html
- https://blueshw.github.io/2017/06/26/presentaional-component-container-component/?no-cache=1