---
layout: post
title: title
categories: Test에서 Code Coverage란?
categories: Programming
---

 
Code Coverage란 프로그램의 소스 코드가 얼마만큼 테스트가 되었는가를 나타내는 지표를 의미 합니다. 보통 오픈소스 테스트 커버리지 툴이 많으면 Statement, Decision, Condition 세가지 커버리지를 기본적으로 측정해 줍니다. 커버리지 측정 기준과 종류에 대해 알아 보겠습니다.

## 커버리지 측정 기준과 종류

### Statement Coverage (=Line Coverage)
구문 커버리지. 개발 소스의 각 라인이 수행되었는지를 확인하는 테스트 커버리지입니다.

### Decision Coverage (=Branch Coverage)
결정 커버리지. 개발 소스의 각 분기문이 수행되었는지를 확인하는 테스트 커버리지입니다. 만약 소스에 if문이 있다고 했을 때 라인 커버리지는 true 조건 1가지에 대해서 커버리지 100%가 나올 수 있는 반면에, 브랜치 커버리지는 if문에 대해 true 조건 / false 조건 각각이 수행되어야 100% 달성할 수 있습니다.

### Condition Coverage (=Term Coverage)
조건 커버리지. 개발 소스의 각 분기문내에 존재하는 조건식을 확인하는 커버리지입니다. 예를 들면 if ( a==b or c=3 ) 에서 내부 2개 조건문이 각각 true/ false 경우로 수행되었는지를 확인하는 테스트 커버리지이다. (주의) 최종 if문의 결과가 true였는지 false 였는지를 따지지는 않으며, 같은 맥락에서 각 조건식 간의 조합에 대해서도 따지지 않습니다.



### MC/DC (Modified Condition/Decision Coverage)
원래는 M C/D C 로 보완된 조건/결정 커버리지입니다. Decision coverage, Condition coverage의 미흡점을 상호 보완하여 분기문의 조건문들이 모두 true/false 가 테스트 되도록 하면서 최종 if문의 결과도 true / fasle 각각이 테스트 되도록 하는 커버리지입니다. MC/DC가 측정되는 수준은 주로 특정 언어에 대한 상용툴 정도에서 커버가 됩니다.

### Path Coverage          
각 if문간의 조합까지도 따지는 커버리지입니다. (첫번째 분기문 true - 두번째 분기문 false 같은)


## 정리
코드에 실행 가능한 단위 테스트가 존재하고 팀이 지속적으로 70%의 테스트 커버리지를 유지할 수 있다는 것은 팀과 코드의 상태 모두 양호하고 프로젝트의 가시성이 확보되었다는 것을 나타내주는 긍정적인 척도라고 할 수 있습니다.

주의할 점은, 테스트 커버리지에 대한 정책을 수립할 때, 테스트 커버리지에 대한 전반적인 이해 없이 맹목적으로 테스트 커버리지 수치만 강조할 경우 오히려 코드 전체의 품질이 저하될 위험이 있습니다. 70%의 라인 커버리지를 달성했다고 해서 70%의 코드 품질을 달성했다고 장담할 수는 없습니다. 따라서 정책적으로 무의미한 목표 커버리지를 강요할 경우 개발자가 취할 수 있는 마지막 방법은 코드의 품질을 보장하지는 않더라도 테스트 커버리지를 높일 수 있는 무가치한 테스트 케이스를 작성하는 것입니다.


라인 커버리지(Line Coverage)-또는 스테이트먼트 커버리지(Statement Coverage)라고도 한다-는 전체 코드 중 테스트에 의해 실행된 코드 라인 수의 비율을 의미합니다. 전체 100라인의 코드 중에서 테스트 케이스가 80 라인을 실행한 경우의 라인 커버리지는 80%가 됩니다.


지금까지 살펴본 바와 같이 팀에서 테스트 커버리지를 측정하고자 한다면 라인 커버리지와 브랜치 커버리지가 아니라 패스 커버리지를 목표로 해야 한다. 물론 라인 커버리지에서 패스 커버리지로 단계적으로 목표를 조정해 가는 것은 좋은 방법이지만 맹목적으로 라인 커버리지를 강제하는 것은 올바른 접근 방법이 아니다. 모든 클래스가70%의 라인 커버리지를 갖는 것보다 소수의 핵심 클래스가 70%의 패스 커버리지를 갖는 것이 더 좋은 품질을 보장할 수 있다는 점에 주목하자.

 
테스트 커버리지 측정은 적은 노력으로도 매우 큰 이익을 얻을 수 있는 효과적인 프랙티스다. 테스트 커버리지를 바보들의 황금으로 만드는 것은 테스트 그 자체가 아니라 테스트 커버리지를 사용하는 우리들 자신이라는 것을 잊지 말아야 한다. 배를 난파시키려는 세이렌의 노래에 현혹되지 말자. 눈을 감고 귀를 막을 필요까지는 없지만 무엇이 옳은 길인가에 대한 냉철한 판단력을 유지해야 한다.


 


----
해당 내용은 다음 글을 참고 하였습니다.
- 