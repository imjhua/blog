---
layout: post
title: Elements, Components And Instances
categories: TODO
---

React를 사용하여 화면을 구성할때 그려진것을 나타내는 세가지 용가 존재합니다. 바로 엘리먼트(Element), 컴포넌트(Component), 인스턴스(Instance)입니다. 이 용어들은 비슷하지만 서로 다른 의미를 가집니다. 이들의 차이로 인해 혼란스럽기도 합니다. 화면에 그려진 것을 나타내는 세가지용어의 의미에 대해 알아봅니다.


## Elements  
리액트 요소는 컴퍼넌트 인스턴스 혹은 DOM 노드와 그들의 속성을 설명하는 일반 객체를 의미합니다. 자바스크립트 객체는 가볍기 때문에 오버헤드 없이 요소들을 만들고 없앨 수 있습니다.

상태변화에 따라 화면을 렌더링 할때에 React는 객체를 분석하고, 이전의 객체 표현과 비교하여 변경 사항 확인 후, 변경이 일어난 경우에만 실제 DOM을 업데이트할 수 있습니다. 요소는 실제 인스턴스가 아니며, 화면에서 보고싶은 것을 알려주는 일종의 방법이라고 할 수 있습니다.


## Components 
컴포넌트는 React Element를 반환하는 함수 혹은 클래스입니다. 따라서 React는 두 종류의 컴포넌트 선언이 존재합니다. ES6 클래스 컴포넌트와 함수형 상태 없는 컴포넌트(functional stateless component)입니다. 

- 함수로 정의된 컴퍼넌트는 단순합니다.
- 클래스로 정의된 컴퍼넌트는 상태가 존재하기떄문에 함수로 정의된 컴퍼넌트보다 강력합니다. 

클래스형 컴포넌트에는 지역 state가 존재하기 때문에 상태를 관리할 수 있고 생명주기 메소드 등을 활용하여 DOM 노드가 생성되거나 삭제될 때 등의 생명주기마다 사용자 정의의 로직을 실행할 수 있습니다.

컴포넌트를 생성할때에는 클래스에서만 사용할 수 있는 기능이 필요하지 않은 경우, 함수 컴퍼넌트를 사용하는 것이 좋습니다.


## Instances
React는 두 종류의 컴포넌트 선언이 존재합니다. ES6 클래스 컴포넌트와 함수형 상태 없는 컴포넌트(functional stateless component)입니다. 각각에 따라 인스턴스의 존재여부가 다릅니다. 

- 클래스 컴포넌트는 인스턴스가 존재합니다.
- 함수형 컴포넌트는 인스턴스가 존재하지 않습니다. 


### 클래스형 컴포넌트
지역 상태(local state)가 존재합니다. 생명주기 메소드를 사용하는데 유용합니다. 클래스 컴포넌트는 인스턴스가 존재합니다. 클래스 컴포넌트를 통해 생성된 인스턴스는 컴포넌트에서 this를 참조 합니다. React에서 class로 컴포넌트를 생성할때에, render에서 this를 통해 메소드를 실행할 수 있습니다. 참고로 리액트는 모든 클래스 컴퍼넌트에 대한 인스턴스 생성을 담당하기 때문에 컴포넌트 인스턴스를 직접 생성할 필요는 없습니다.



### 함수형 상태 없는 컴포넌트
함수형 상태 없는 컴포넌트는 props를 인자로 받고 JSX를 반환하는 단순한 함수입니다. 이 함수는 어떤 상태도 갖지 않으며 React의 생애주기(lifecycle) 메소드에도 접근하지 않습니다. 이 컴포넌트는 이름 붙여진 그대로 상태가 없습니다. 함수형 컴포넌트는 인스턴스가 존재하지 않습니다. 



## 정리
React는 UI의 구조를 내부적으로 컴포넌트가 반환하는 엘리먼트들을 트리 형태로 관리하고 표현합니다. 내부적으로 먼저 관리하고 변경이 필요한 부분만 찾도록 구현했기 때문에 불필요한 DOM 노드의 생성이나 제어를 최소화합니다. 보통 이 구조를 Virtual-DOM이라고 하며 이러한 구조의 성능 최적화를 위해서는 React의 Element, Component, Instance 이들 세가지 구성요소들에 대한 정확한 이해가 필요할것입니다. React는 직접적인 UI 제어를 최소화시켜 동작하기 때문에 기본적으로 빠르다고 생각할 수 있지만, 제어를 최소화시키기 위해 선행되는 작업에 대한 비용을 무시해서는 안됩니다.

컴포넌트를 적절히 분리하는 것은 중요합니다. 아무리 간단한 엘리먼트와 로직이라도 기능, 책임, 재사용성 등으로 컴포넌트를 적절히 분리하여 이슈를 빠르게 파악하고 대응할 수 있도록 개발해야겠습니다.


----
해당 내용은 다음 글을 참고 하였습니다.
- https://medium.com/@dan_abramov/react-components-elements-and-instances-90800811f8ca
- https://github.com/wonism/TIL/blob/master/front-end/reactjs/etc/components-elements-instances.md